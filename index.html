<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>2025 Archive Receipt</title>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
      /* Helvetica Thin 스타일 설정 */
      body {
        font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #fff;
        display: flex;
        flex-direction: column;
        align-items: center;
        -webkit-font-smoothing: antialiased;
      }

      #poster-area {
        width: 360px;
        background-color: #fff;
        padding: 40px 20px;
        box-sizing: border-box;
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      /* 1. 상단 로고 이미지 영역 */
      .header-image-container {
        width: 100%;
        display: flex;
        justify-content: center;
        margin-bottom: 50px;
      }

      .header-image-container img {
        width: 240px; /* 로고 크기에 맞게 조절 */
        height: auto;
      }

      /* 2. Thin 그리드 시스템 */
      #gallery {
        display: grid;
        grid-template-columns: 1fr 1fr;
        column-gap: 10px;
        row-gap: 35px; /* 행 간격을 넓혀 시원하게 배치 */
        width: 100%;
      }

      .item {
        display: flex;
        align-items: center;
        justify-content: center;
      }

      /* 숫자 Thin 변경 */
      .num {
        font-size: 40px;
        font-weight: 500; /* 가장 가늘게 */
        letter-spacing: -0.5px;
        color: #000;
      }

      /* 괄호 Thin 변경 */
      .bracket {
        font-size: 42px;
        font-weight: 500; /* 가장 가늘게 */
        margin: 0 2px;
        color: #000;
        line-height: 1;
        transform: scaleY(1.1); /* 괄호를 위아래로 살짝 늘려 세련되게 */
      }

      /* 이미지 박스 (크기 확대) */
      .img-placeholder {
        width: 70px; /* 괄호 사이 이미지 폭 확대 */
        height: 45px; /* 이미지 높이 */
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        margin: 0 2px;
      }

      .img-placeholder img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      /* 3. 하단 바코드 및 텍스트 */
      .footer {
        width: 100%;
        margin-top: 60px;
        border-top: 1px solid #000; /* 라인도 얇게 */
        padding-top: 20px;
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .barcode {
        width: 100%;
        height: 50px;
        background: repeating-linear-gradient(
          90deg,
          #000 0px,
          #000 1px,
          #fff 1px,
          #fff 3px,
          #000 3px,
          #000 4px,
          #fff 4px,
          #fff 7px
        );
        margin-bottom: 15px;
      }

      .footer-input {
        width: 100%;
        border: none;
        text-align: center;
        font-size: 14px;
        font-weight: 300; /* 하단 텍스트도 Thin */
        font-family: inherit;
        letter-spacing: 5px;
        text-transform: lowercase;
        outline: none;
        background: transparent;
      }

      /* 컨트롤 버튼 (화면 캡처 시 제외됨) */
      .controls {
        margin: 40px 0;
        display: flex;
        gap: 15px;
      }

      .btn {
        background: #eee;
        color: #000;
        border: 1px solid #ddd;
        padding: 10px 20px;
        border-radius: 4px;
        font-weight: 400;
        cursor: pointer;
        font-size: 13px;
      }
    </style>
  </head>
  <body>
    <div id="poster-area">
      <div class="header-image-container">
        <img
          src="2025_logo.png"
          alt="2025"
          id="top-logo"
          onerror="this.style.display='none'"
        />
      </div>

      <div id="gallery"></div>

      <div class="footer">
        <div class="barcode"></div>
        <input type="text" class="footer-input" value="goodbye 2025" />
      </div>
    </div>

    <div class="controls">
      <input type="file" id="file-input" multiple hidden />
      <button
        class="btn"
        onclick="document.getElementById('file-input').click()"
      >
        사진 선택
      </button>
      <button class="btn" id="save-btn" style="background: #000; color: #fff">
        이미지 저장
      </button>
    </div>

    <script>
      const gallery = document.getElementById('gallery');
      const fileInput = document.getElementById('file-input');
      const saveBtn = document.getElementById('save-btn');
      let count = 0;

      for (let i = 1; i <= 12; i++) {
        const div = document.createElement('div');
        div.className = 'item';
        div.innerHTML = `
                <span class="num">${String(i).padStart(2, '0')}</span>
                <span class="bracket">(</span>
                <div class="img-placeholder" id="img-${i}"></div>
                <span class="bracket">)</span>
            `;
        gallery.appendChild(div);
      }

      fileInput.onchange = (e) => {
        const files = Array.from(e.target.files);
        files.forEach((file) => {
          if (count >= 12) return;
          count++;
          const reader = new FileReader();
          reader.onload = (ev) => {
            document.getElementById(
              `img-${count}`
            ).innerHTML = `<img src="${ev.target.result}">`;
          };
          reader.readAsDataURL(file);
        });
      };

      saveBtn.onclick = () => {
        html2canvas(document.getElementById('poster-area'), {
          scale: 3,
          backgroundColor: '#ffffff',
        }).then((canvas) => {
          const link = document.createElement('a');
          link.download = '2025_thin_receipt.png';
          link.href = canvas.toDataURL();
          link.click();
        });
      };
    </script>
  </body>
</html>

