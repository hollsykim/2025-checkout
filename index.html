<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Helvetica Regular Poster</title>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
      /* 모든 서체를 Helvetica Regular로 통일 */
      body,
      .order-number,
      .bracket,
      .footer-year {
        font-family: 'Helvetica', 'Arial', sans-serif;
        font-weight: 400; /* Regular 굵기 */
        -webkit-font-smoothing: antialiased;
        color: #000;
      }

      body {
        margin: 0;
        padding: 0;
        background-color: #f0f0f0;
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      /* 16:9 포스터 영역 */
      #poster-area {
        width: 100vw;
        aspect-ratio: 9 / 16;
        background-color: #fff;
        display: flex;
        flex-direction: column;
        padding: 40px 10px 20px 10px; /* 상하좌우 여백 */
        box-sizing: border-box;
        position: relative;
      }

      #gallery {
        display: flex;
        flex-direction: column;
        gap: 10px;
        flex-grow: 1;
        justify-content: flex-start;
      }

      .bracket-set {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100%;
      }

      /* 숫자: Regular 굵기, 괄호와 같은 선상 */
      .order-number {
        font-size: clamp(40px, 9vw, 60px);
        margin-right: 5px;
        line-height: 1;
        letter-spacing: -1px;
      }

      .bracket {
        font-size: clamp(45px, 10vw, 70px);
        line-height: 1;
      }

      .image-box {
        max-width: 60%;
        margin: 0 4px;
      }

      .image-box img {
        width: 100%;
        height: auto;
        max-height: 90px;
        object-fit: contain;
        display: block;
      }

      /* 하단 2025: Regular 굵기로 화면에 꽉 차게 */
      .footer-year {
        font-size: 26vw; /* 화면 너비에 반응하여 꽉 차게 설정 */
        text-align: center;
        width: 100%;
        line-height: 0.8;
        letter-spacing: -0.05em; /* 자간 조절로 꽉 찬 느낌 부여 */
        margin-top: auto; /* 최하단 배치 */
        padding-bottom: 10px;
      }

      /* 하단 컨트롤러 */
      .controls {
        position: fixed;
        bottom: 0;
        width: 100%;
        background: rgba(255, 255, 255, 0.9);
        padding: 20px;
        display: flex;
        flex-direction: column;
        align-items: center;
        box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05);
        z-index: 100;
      }

      .btn {
        background: #000;
        color: #fff;
        padding: 15px 40px;
        border-radius: 2px;
        font-size: 14px;
        letter-spacing: 1px;
        cursor: pointer;
        border: none;
        margin-top: 10px;
      }

      #save-btn {
        background: #333;
        display: none;
      }
      #file-input {
        display: none;
      }
      .status-text {
        font-size: 10px;
        color: #999;
      }
    </style>
  </head>
  <body>
    <div id="poster-area">
      <div id="gallery"></div>
      <div class="footer-year">2025</div>
    </div>

    <div class="controls">
      <div class="status-text">
        COUNT: <span id="current-count">0</span> / 12
      </div>
      <label for="file-input" id="upload-label" class="btn">ADD IMAGES</label>
      <input type="file" id="file-input" accept="image/*" multiple />
      <button id="save-btn" class="btn">DOWNLOAD POSTER</button>
    </div>

    <script>
      const fileInput = document.getElementById('file-input');
      const gallery = document.getElementById('gallery');
      const countDisplay = document.getElementById('current-count');
      const saveBtn = document.getElementById('save-btn');
      const uploadLabel = document.getElementById('upload-label');

      let photoCount = 0;

      fileInput.addEventListener('change', function (e) {
        const files = Array.from(e.target.files);

        files.forEach((file) => {
          if (photoCount >= 12) return;

          photoCount++;
          countDisplay.innerText = photoCount;

          const reader = new FileReader();
          reader.onload = function (event) {
            const bracketSet = document.createElement('div');
            bracketSet.className = 'bracket-set';
            const formattedNum =
              photoCount < 10 ? '0' + photoCount : photoCount;

            bracketSet.innerHTML = `
                        <span class="order-number">${formattedNum}</span>
                        <div class="bracket">(</div>
                        <div class="image-box">
                            <img src="${event.target.result}">
                        </div>
                        <div class="bracket">)</div>
                    `;
            gallery.appendChild(bracketSet);

            if (photoCount === 12) {
              uploadLabel.style.display = 'none';
              saveBtn.style.display = 'block';
            }
          };
          reader.readAsDataURL(file);
        });
        fileInput.value = '';
      });

      saveBtn.addEventListener('click', function () {
        const poster = document.getElementById('poster-area');
        html2canvas(poster, {
          scale: 3,
          backgroundColor: '#ffffff',
          useCORS: true,
        }).then((canvas) => {
          const link = document.createElement('a');
          link.download = 'Helvetica_Regular_2025.png';
          link.href = canvas.toDataURL('image/png');
          link.click();
        });
      });
    </script>
  </body>
</html>
